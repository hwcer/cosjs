"use strict";

if(!global._cosjs_library) {
    global._cosjs_library = require('./lib/loader')(__dirname + '/lib');
    global._cosjs_library._safeMode = true;
}
exports = module.exports = function(name){
    if(arguments.length ==0){
        return _cosjs_library;
    }
    else {
        return _cosjs_library.require(name);
    }
}


exports.jsonParse = function(text,reviver){
    if(typeof text == 'object'){
        return text;
    }
    var json = null;
    try {
        json = JSON.parse(text,reviver);
    }
    catch(e){
        json = null;
    }
    return json;
}